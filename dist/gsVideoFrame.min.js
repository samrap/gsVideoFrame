!function(t){t.fn.gsVideoFrame=function(e){var n=new Date,o={autoplay:1,element:t(this),playing:!1,id:"video"+n.getTime(),target:!1,closeButtonClass:"close",container:"div",containerClass:"embed-responsive-item",type:"",src:"",onBeforeOpen:function(){},onOpen:function(){},onPause:function(){},onPlay:function(){},onBeforeClose:function(){},onClose:function(){}};e=t.extend(o,e),"undefined"!=typeof e.element.data("type")&&["youtube","vimeo"].indexOf(e.element.data("type").trim())&&(e.type=t(this).data("type")),""===e.src.trim()&&("undefined"!=typeof e.element.data("src")?e.src=t(this).data("src"):"undefined"!=typeof e.element.attr("href")&&(e.src=t(this).attr("href"))),e.api=function(t,e,n){"function"!=typeof n&&(n=function(){});var o,i=document.getElementsByTagName("script")[0];return document.getElementById(e)?void n():(o=document.createElement("script"),o.id=e,o.onload=function(){n()},o.src=t,void i.parentNode.insertBefore(o,i))},e.youtube=function(){e.com=function(){e.tmp=e.src.split("?")[1],e.tmp=e.tmp.split("&");for(var t=0;t<e.tmp.length;t++)if(e.param=e.tmp[t].split("="),"v"===e.param[0]&&"undefined"!=typeof e.param[1])return e.param[1];return""},e.be=function(){return e.tmp=e.src.split("youtu.be/"),"undefined"!=typeof e.tmp[1]?e.tmp[1].split("/")[0]:""},e.getVidId=function(){return e.src.indexOf("youtu.be")>=0?e.be():e.src.indexOf("youtube.")>=0?e.com():""},e.getUrl=function(){return e.tmp="https://www.youtube.com/embed/"+e.getVidId()+"?enablejsapi=1&color=white&iv_load_policy=3&showinfo=0&rel=0",e.autoplay&&(e.tmp+="&autoplay=1"),e.tmp},e.state=function(t){0===t.data?e.close():1===t.data?e.onPlay():2===t.data&&e.onPause()},e.listen=function(){e.tmp={events:{onStateChange:e.state}},e.autoplay&&(e.tmp.autoplay=1),e.player=new YT.Player(e.id,e.tmp)},this.init=function(){e.vidId=e.getVidId(),e.api("https://www.youtube.com/player_api","youtube-api",function(){e.frame(e.getUrl()),setTimeout(function(){e.listen()},1e3)})},this.init()},e.vimeo=function(){e.getUrl=function(){return e.tmp=e.src.split("?")[0].split("vimeo.com/"),"undefined"!=typeof e.tmp[1]?(e.tmp="https://player.vimeo.com/video/"+e.tmp[1].split("/")[0]+"?api=1&badge=0&byline=0&portrait=0&title=0&color=ffffff&buttons=0&player_id="+e.id,e.autoplay&&(e.tmp+="&autoplay=1"),e.tmp):""},e.listen=function(){e.player=$f(e.iframe[0]),e.player.addEvent("ready",function(){e.player.addEvent("play",function(){e.onPlay()}),e.player.addEvent("pause",function(){e.onPause()}),e.player.addEvent("finish",function(){e.close()})})},this.init=function(){e.api("//f.vimeocdn.com/js/froogaloop2.min.js","vimeo-api",function(){e.frame(e.getUrl()),e.listen()})},this.init()},e.embed=function(){"youtube"===e.type||e.src.indexOf("youtu")>=0?e.youtube():("vimeo"===e.type||e.src.indexOf("vimeo")>=0)&&e.vimeo()},e.close=function(){e.onBeforeClose(),e.playing=!1,e.content.stop().animate({opacity:0},250,function(){t(this).remove(),e.onClose(),e={}})},e.initClose=function(){e.playing=!0,t(window).on("keyup",function(t){e.playing&&27===t.keyCode&&e.close()})},e.append=function(n){e.onBeforeOpen(),e.content=n,e.target instanceof jQuery&&e.target.length>0?(console.log("Target acquired"),e.target.append(e.content)):"string"==typeof e.target&&t(e.target).length>0?(console.log("Target stringified"),t(e.target).first().append(e.content)):(console.log("Looget dat body"),t("body").append(e.content)),e.content.stop().animate({opacity:1},250,function(){e.onOpen()}),e.initClose()},e.frame=function(n){"undefined"!=typeof n&&null!==n&&""!==n&&(e.iframe=t("<iframe allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen />").attr({src:n,frameborder:"0",id:e.id}),e.closeButton instanceof jQuery||("string"!=typeof e.closeButton&&(e.closeButton="i"),e.closeButton=t("<"+e.closeButton+" />")),"string"==typeof e.closeButtonClass&&e.closeButton.addClass(e.closeButtonClass),e.closeButton.on("click",function(){e.close()}),e.tmp=t("<"+e.container+" />").css({opacity:0}).append(e.iframe,e.closeButton),"string"==typeof e.containerClass&&e.tmp.addClass(e.containerClass),e.append(e.tmp))},e.embed()}}(jQuery);